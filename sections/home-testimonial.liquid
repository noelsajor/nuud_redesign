{% if section.blocks.size > 0 %}
{% case section.settings.grid %}
  {% when '1' %}
  {% when '2' %}{%- assign column = 'two-column' -%}
  {% when '3' %}{%- assign column = 'three-column' -%}
  {% when '4' %}{%- assign column = 'four-column' -%}
  {% else %}{%- assign column = 'three-column' -%}
{% endcase %}

{%- comment -%} Proper boxed_styles handling {%- endcomment -%}
{% case section.settings.boxed_styles %}
  {% when 'overall_boxed' %}{%- assign boxed_styles = 'overall_boxed' -%}
  {% when 'content_boxed' %}{%- assign boxed_styles = 'content_boxed' -%}
  {% when 'quote_boxed' %}{%- assign boxed_styles = 'quote_boxed' -%}
  {% else %}{%- assign boxed_styles = 'default' -%}
{% endcase %}

{% if section.settings.enable_overlay %}
  {% assign section_overlay = 'dt-sc-overlay' %}
{% endif %}

{% case section.settings.background_style %}
  {% when 'default' %}
  {% when 'parallax' %}{%- assign background_style = 'data-speed="2"' -%}
  {% when 'fixed' %}{%- assign background_style = 'data-speed="1"' -%}
{% endcase %}

{% assign listWidth = section.settings.content_width | split: '/' %}
{% assign leftColumn = listWidth[0] %}
{% assign rightColumn = listWidth[1] %}

{% assign listWidth = section.settings.lap_content_width | split: '/' %}
{% assign lap_leftColumn = listWidth[0] %}
{% assign lap_rightColumn = listWidth[1] %}

{% if section.settings.show_background_image %}
  {% assign lazyScript = "lazyload" %}
{% endif %}

<div data-section-id="{{ section.id }}"
     data-section-type="testimonials-section"
     data-item-per-view="{{section.settings.items_per_view}}"
     data-laptop-screen-items="{{section.settings.items_laptop_view}}"
     data-tablet-screen-items="{{section.settings.items_tablet_view}}"
     data-small-screen-items="{{section.settings.items_mobile_view}}"
     data-autoplay="{{section.settings.slider_autoplay}}"
     data-center-mode="{{section.settings.enable_center_mode }}"
     data-blocks-limit="{{section.blocks.size}}"
     data-item-space="{{section.settings.column_gap}}"
     data-auto-height="{{section.settings.enable_auto_height}}">

  <div class="dt-sc-section-wrapper {{lazyScript}} {{ section_overlay }} {% if section.settings.background_style == 'parallax' %}parallax-initiated{% endif %}"
       {% if section.settings.background_style == 'parallax' %} data-speed="2" data-style="parallax"{% endif %}
       style="{% render 'bg-color-image-padding' %} background-size: {{- section.settings.background_size -}}; {% if section.settings.background_style == 'fixed' %}background-attachment: fixed;{% endif %} background-repeat:{% if section.settings.background_size == 'repeat' %}repeat{% else %}no-repeat;{% endif %}"
       {% include 'bg_image' %}>

    {%- comment -%}
      NEW: Constrain all foreground content (not background) inside a fixed container.
      We intentionally do NOT wrap the .dt-sc-section-wrapper itself so its background spans full width.
    {%- endcomment -%}
    <div class="max-container">
      <div class="row {{ section.settings.custom_class_name }}">

        {% render 'section-heading', class: section.id %}

        {% if section.settings.enable_slider %}
          <div class="dt-sc-swiper-slider swiper-container {% if section.settings.dots %} {{ section.settings.carousel_pagination_bottom_alignment }} {{ section.settings.carousel_pagination_alignment }} {% endif %} {% if section.settings.arrows %} {{ section.settings.nav_arrow_position }} {{ section.settings.center_nav_arrow_alignment }} {% endif %}">
        {% endif %}

        {% if section.settings.enable_slider %}
          <div id="swiper-{{section.id}}-slider">
        {% endif %}

        <div class="dt-sc-testimonial-section {{ section.settings.boxed_styles }} {% if section.settings.enable_slider %}swiper-wrapper{% endif %} {% unless section.settings.enable_slider %}dt-sc-column{% endunless %}{% unless section.settings.enable_slider %} {{column}}{% endunless %}">

          {% for block in section.blocks %}
            {% assign review_type = block.settings.review_type | default: 'full' %}

            {% if review_type == 'photo' %}
              {%- comment -%} PHOTO REVIEW CARD (flush image, inherits card border/radius) {%- endcomment -%}
              <div class="dt-sc-testimonial {% if section.settings.enable_slider %}swiper-slide{% endif %} review-type-photo {{section.settings.block_style}} {{section.settings.vertical_position}}">
                <div class="dt-sc-testimonial-content {{section.settings.text_position}}">
                  <div class="dt-sc-testimonial-content-inner">
                    <div class="dt-sc-testimonial-photo">
                      {% if block.settings.photo != blank %}
                        <img
                          src="{{ block.settings.photo | img_url: '1000x' }}"
                          alt="{{ block.settings.photo.alt | default: 'Customer photo' | escape }}"
                          loading="lazy" decoding="async">
                      {% else %}
                        {{ 'image' | placeholder_svg_tag: 'placeholder-svg' }}
                      {% endif %}
                    </div>
                  </div>
                </div>
              </div>

            {% else %}
              {%- comment -%} FULL REVIEW CARD (existing styles) {%- endcomment -%}

              {% if section.settings.block_style == 'style_1' %}
                <div class="dt-sc-testimonial {% if section.settings.enable_slider %}swiper-slide{% endif %} {% if section.settings.reverse_column %}reverse{% endif %} {{section.settings.quote_style}} {{section.settings.block_style}} {{section.settings.vertical_position}}">
                  {% if block.settings.icon != blank %}
                    <div class="dt-sc-testimonial-image">
                      <img src="{{ block.settings.icon | img_url: 'large' }}"
                           alt="{{ block.settings.author | default: 'Testimonial author' | escape }}"
                           loading="lazy" decoding="async" />
                    </div>
                  {% else %}
                    {{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
                  {% endif %}

                  <div class="dt-sc-testimonial-content {{section.settings.text_position}}">
                    <div class="dt-sc-testimonial-content-inner">
                      <div class="dt-sc-testimonial-quote">{% if block.settings.quote != blank %}{{ block.settings.quote }}{% endif %}</div>

                      {% unless block.settings.star == '0' %}
                        <div class="dt-sc-author-rating">
                          {% case block.settings.star %}
                            {% when '0' %}<div class="no-star-rating"></div>
                            {% when '0.5' %}<div class="half-star-rating"></div>
                            {% when '1' %}<div class="one-star-rating"></div>
                            {% when '1.5' %}<div class="one-half-star-rating"></div>
                            {% when '2' %}<div class="two-star-rating"></div>
                            {% when '2.5' %}<div class="two-half-star-rating"></div>
                            {% when '3' %}<div class="three-star-rating"></div>
                            {% when '3.5' %}<div class="three-half-star-rating"></div>
                            {% when '4' %}<div class="four-star-rating"></div>
                            {% when '4.5' %}<div class="four-half-star-rating"></div>
                            {% when '5' %}<div class="five-star-rating"></div>
                          {% endcase %}
                        </div>
                      {% endunless %}

                      {% if block.settings.author != blank or block.settings.job != blank %}
                        <div class="dt-sc-author-info {{ section.settings.author_info_style }}">
                          <cite><i>{{ block.settings.author }}</i><span>{{ block.settings.job }}</span></cite>
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>

              {% elsif section.settings.block_style == 'style_2' %}
                <div class="dt-sc-testimonial {% if section.settings.enable_slider %}swiper-slide{% endif %} {% if section.settings.reverse_column %}reverse{% endif %} {{section.settings.quote_style}} {{section.settings.block_style}}">
                  <div class="dt-sc-testimonial-content {{section.settings.text_position}}">
                    <div class="dt-sc-testimonial-content-inner">

                      <div class="dt-sc-testimonial-quote-content">
                        <div class="dt-sc-testimonial-quote">{% if block.settings.quote != blank %}{{ block.settings.quote }}{% endif %}</div>
                        <div class="dt-sc-author-rating">
                          {% case block.settings.star %}
                            {% when '0' %}<div class="no-star-rating"></div>
                            {% when '0.5' %}<div class="half-star-rating"></div>
                            {% when '1' %}<div class="one-star-rating"></div>
                            {% when '1.5' %}<div class="one-half-star-rating"></div>
                            {% when '2' %}<div class="two-star-rating"></div>
                            {% when '2.5' %}<div class="two-half-star-rating"></div>
                            {% when '3' %}<div class="three-star-rating"></div>
                            {% when '3.5' %}<div class="three-half-star-rating"></div>
                            {% when '4' %}<div class="four-star-rating"></div>
                            {% when '4.5' %}<div class="four-half-star-rating"></div>
                            {% when '5' %}<div class="five-star-rating"></div>
                          {% endcase %}
                        </div>
                      </div>

                      {% if block.settings.author != blank or block.settings.job != blank %}
                        <div class="dt-sc-author-info {{ section.settings.author_info_style }}">
                          {% if block.settings.icon != blank %}
                            <div class="dt-sc-testimonial-image">
                              <img class="lazyload"
                                   data-src="{{ block.settings.icon | img_url: '200x200' }}"
                                   data-aspectratio="{{ block.settings.icon.aspect_ratio }}"
                                   data-sizes="auto"
                                   alt="{{ block.settings.author | default: 'Testimonial author' | escape }}">
                              <noscript>
                                {{ block.settings.icon | img_url: '480x480', scale: 2 | img_tag: block.settings.icon.alt, 'dt-sc-noscript-image' }}
                              </noscript>
                            </div>
                          {% else %}
                            {{ 'hero-apparel-1' | placeholder_svg_tag: 'placeholder-svg' }}
                          {% endif %}
                          <cite>{{ block.settings.author }}<span>{{ block.settings.job }}</span></cite>
                        </div>
                      {% endif %}
                    </div>
                  </div>
                </div>

              {% elsif section.settings.block_style == 'style_3' %}
                <div class="dt-sc-testimonial {{section.settings.text_position}} {% if section.settings.enable_slider %}swiper-slide{% endif %} {% if section.settings.reverse_column %}reverse{% endif %} {{section.settings.quote_style}} {{section.settings.block_style}}">
                  {% if block.settings.icon != blank %}
                    <div class="dt-sc-testimonial-image">
                      <img class="lazyload"
                           data-src="{{ block.settings.icon | img_url: '200x200' }}"
                           data-aspectratio="{{ block.settings.icon.aspect_ratio }}"
                           data-sizes="auto"
                           alt="{{ block.settings.author | default: 'Testimonial author' | escape }}">
                      <noscript>
                        {{ block.settings.icon | img_url: '480x480', scale: 2 | img_tag: block.settings.icon.alt, 'dt-sc-noscript-image' }}
                      </noscript>
                    </div>
                  {% else %}
                    {% capture current %}{% cycle 1, 2, 3, 4, 5, 6 %}{% endcapture %}
                    {{ 'product-' | append: current | placeholder_svg_tag: 'placeholder-svg dark' }}
                  {% endif %}

                  <div class="dt-sc-testimonial-content {{section.settings.text_position}}">
                    <div class="dt-sc-testimonial-content-inner">
                      <div class="dt-sc-testimonial-quote">{% if block.settings.quote != blank %}{{ block.settings.quote }}{% endif %}</div>

                      {% if block.settings.author != blank or block.settings.job != blank %}
                        <div class="dt-sc-author-info {{ section.settings.author_info_style }}">
                          <cite>{{ block.settings.author }}<span>{{ block.settings.job }}</span></cite>
                        </div>
                      {% endif %}

                      <div class="dt-sc-author-rating">
                        {% case block.settings.star %}
                          {% when '0' %}<div class="no-star-rating"></div>
                          {% when '0.5' %}<div class="half-star-rating"></div>
                          {% when '1' %}<div class="one-star-rating"></div>
                          {% when '1.5' %}<div class="one-half-star-rating"></div>
                          {% when '2' %}<div class="two-star-rating"></div>
                          {% when '2.5' %}<div class="two-half-star-rating"></div>
                          {% when '3' %}<div class="three-star-rating"></div>
                          {% when '3.5' %}<div class="three-half-star-rating"></div>
                          {% when '4' %}<div class="four-star-rating"></div>
                          {% when '4.5' %}<div class="four-half-star-rating"></div>
                          {% when '5' %}<div class="five-star-rating"></div>
                        {% endcase %}
                      </div>
                    </div>
                  </div>
                </div>
              {% endif %}
            {% endif %}

          {% endfor %}
        </div>

        {% if section.settings.enable_slider %}</div>{% endif %}

        {% if section.settings.enable_slider %}
          {% if section.settings.arrows %}
            <div class="swiper-{{ section.id}}-arrows swiper-arrows">
              <div id="swiper-{{ section.id}}-next" class="swiper-button-next dt-sc-btn"></div>
              <div id="swiper-{{ section.id}}-prev" class="swiper-button-prev dt-sc-btn"></div>
            </div>
          {% endif %}
          {% if section.settings.dots %}
            <div id="swiper-{{ section.id}}-pagination" class="swiper-pagination"></div>
          {% endif %}
        {% endif %}

        {% if section.settings.enable_slider %}</div>{% endif %}

      </div>
    </div> <!-- /.max-container -->
  </div>

  <div class="rightimage" style="{% if section.settings.image_2 != blank %} background-image:url('{{ section.settings.image_2 | img_url: 'master' }}');background-repeat:no-repeat; position:absolute;width:110px;height:170px;{% endif %}"></div>
</div>
{% endif %}

<style>
/* NEW: Foreground content container (background remains on .dt-sc-section-wrapper) */
#shopify-section-{{section.id}}.home-testimonial-block .max-container{
  max-width:1280px;
  margin:0 auto;
  padding:80px 40px;
  box-sizing:border-box;
}

.dt-sc-testimonial > svg.placeholder-svg {
  width: 90px;
  height: 90px;
  margin: auto;
  background-color: var(--DTBodyBGColor);
  border-radius: 50%;
}

/* --- pulled from settings --- */
{% assign margin = section.settings.margin | split: ',' %}
{% assign margin_top = margin[0] %}
{% assign margin_bottom = margin[1] %}
{% assign padding = section.settings.padding | split: ',' %}
{% assign padding_top = padding[0] %}
{% assign padding_bottom = padding[1] %}

/* ---------- Global card aspect ratio variable (auto when not set) ---------- */
#shopify-section-{{section.id}}.home-testimonial-block{
  --card-aspect: {% if section.settings.card_aspect_ratio == blank or section.settings.card_aspect_ratio == 'none' %}auto{% else %}{{ section.settings.card_aspect_ratio }}{% endif %};
}

/* Apply aspect ratio to full-review cards when user sets one */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.overall_boxed .dt-sc-testimonial{
  aspect-ratio: var(--card-aspect);
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.content_boxed .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-testimonial-content-inner,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-testimonial-content-inner{
  aspect-ratio: var(--card-aspect);
}

/* Photo reviews: always have a solid aspect (fallback to 4/5 if editor setting is 'none') */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial.review-type-photo{
  position: relative;
  display: block;
  aspect-ratio: {% if section.settings.card_aspect_ratio == blank or section.settings.card_aspect_ratio == 'none' %}4/5{% else %}{{ section.settings.card_aspect_ratio }}{% endif %};
  overflow:hidden;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.overall_boxed .dt-sc-testimonial.review-type-photo{ padding:0; }

/* If using content/quote boxed on photo cards, keep border/radius but remove padding and clip */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.content_boxed .dt-sc-testimonial.review-type-photo .dt-sc-testimonial-content .dt-sc-testimonial-content-inner,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial.review-type-photo .dt-sc-testimonial-content .dt-sc-testimonial-content-inner{
  padding:0; overflow:hidden; height:100%;
}

/* Ensure quote_boxed photo card has a card shell (border/radius) */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial.review-type-photo .dt-sc-testimonial-content .dt-sc-testimonial-content-inner{
  background: {{ section.settings.testimonial_background_color }};
  color: {{ section.settings.testimonial_border_color }};
  border: 1px solid currentcolor;
  border-radius: {{section.settings.boxed_border_radius}}px;
}

/* Section wrapper + decorative pieces */
#shopify-section-{{section.id}}.home-testimonial-block{position:relative;}
#shopify-section-{{section.id}}.home-testimonial-block:after{
  content: " ";
  position: absolute;
  width:493px; height:777px;
  {% if section.settings.after_image != blank %}
    background-image:url({{ section.settings.after_image | img_url:'master' }});
  {% endif %}
  background-size: auto; background-repeat: no-repeat; background-position:center bottom;
  bottom:-140px; left: 0; right: 0; z-index:0;
  animation: dt-swing2 ease-in-out 3s infinite alternate;
}

#shopify-section-{{section.id}}.home-testimonial-block .rightimage {
  animation: bounce 5s infinite linear;
  top: 120px; bottom:auto; right:70px; background-size: contain;
}

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper {background-position: 95% 0 !important; position:relative;}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper:after{
  content: " ";
  position: absolute;
  width: 100%; height:11vw;
  mask-repeat:repeat-x; mask-size:100%;
  {% if section.settings.after_mask_image != blank %}
    mask-image:url({{ section.settings.after_mask_image | img_url:'master' }});
    -webkit-mask-image:url({{ section.settings.after_mask_image | img_url:'master' }});
  {% else %}
    mask-image:url('{{ 'background1.svg' | asset_url }}');
    -webkit-mask-image:url('{{ 'background1.svg' | asset_url }}');
  {% endif %}
  -webkit-mask-repeat:repeat-x; -webkit-mask-size:100%;
  background:{{ section.settings.mask_image_color}};
  top:-7vw; left: 0; right: 0; z-index:0;
}

/* Responsive offsets for the mask */
@media (max-width: 1540px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper:after{top:-90px;}
}
@media (max-width: 1199px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper:after{top:-75px;}
}
@media screen and (max-width: 980px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper:after{top:-60px;}
}
@media screen and (max-width: 767px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper:after{display:none;}
}

/* Spacing on wrapper (kept as in original; background wrapper can still have its own spacing) */
@media only screen and (min-width: 1200px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper {
    margin-top:{{margin_top}}px; margin-bottom:{{margin_bottom}}px;
    padding-top:{{padding_top}}px; padding-bottom:{{padding_bottom}}px;
  }
}
@media only screen and (max-width: 1199px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-section-wrapper {
    margin-top:{{margin_top | divided_by: 2 }}px; margin-bottom:{{margin_bottom | divided_by: 2}}px;
    padding-top:{{padding_top | divided_by: 2}}px; padding-bottom:{{padding_bottom | divided_by: 2}}px;
  }
}

/* Heading colors */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-heading .dt-sc-main-heading { font-weight:600; color: {{ section.settings.section_heading_color }}; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-heading .dt-sc-sub-heading { color: {{ section.settings.section_sub_heading_color }}; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-heading .dt-sc-heading-description { color: {{ section.settings.section_description_color }}; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-heading .dt-sc-btn {
  background: {{ section.settings.section_button_bg_color }}; color: {{ section.settings.section_button_text_color }};
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-heading .dt-sc-btn:hover {
  background: {{ section.settings.section_button_hover_bg_color }}; color: {{ section.settings.section_button_hover_text_color }};
}

/* Overlay */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-overlay:before {
  color: {{ section.settings.background_color }}; background: currentcolor; opacity: {{ section.settings.overlay_transparency }};
}

/* Swiper controls */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-arrows .dt-sc-btn {
  background: {{ section.settings.navigation_button_color }}; border:none; opacity:1;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-arrows .dt-sc-btn[class*="swiper-button-"]:after {
  color: {{ section.settings.navigation_button_icon_color }};
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-arrows .dt-sc-btn:hover {
  background: {{ section.settings.navigation_button_hover_color }}; border:none;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-arrows .dt-sc-btn:hover[class*="swiper-button-"]:after {
  color: {{ section.settings.navigation_button_hover_icon_color }};
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-pagination-bullet { background: {{ section.settings.navigation_dot_color }}; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-pagination-bullet.swiper-pagination-bullet-active { background: {{ section.settings.navigation_dot_active_color }}; }

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section:not(.swiper-wrapper) { margin: 0 auto 30px; gap: {{ section.settings.column_gap }}px; }

.dt-sc-swiper-slider.swiper-container.swiper-container {
  overflow: visible;
}
/* Typography / layout for items */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial { display:flex; justify-content:space-between; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial cite i { font-style: normal; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial cite {
  color: {{ section.settings.testimonial_author_text_color }};
  font-family: var(--DTFontTypo_Heading); font-size:36px; font-weight:normal; letter-spacing:2px;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial cite span {
  color: {{ section.settings.testimonial_author_designation_color }};
  font-family: var(--DTFontTypo_Body); font-size:18px; letter-spacing:0;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content { color: {{ section.settings.testimonial_content_color }}; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="star-rating"] { color: {{ section.settings.testimonial_review_color }}; }

/* Quote icon masks */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-"] .dt-sc-testimonial-content .dt-sc-testimonial-content-inner:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-"] .dt-sc-testimonial-image::before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-content"] .dt-sc-testimonial-content .dt-sc-testimonial-quote-content::before {
  background-color: {{ section.settings.testimonial_quote_icon_color }};
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="no-quote-icon"] .dt-sc-testimonial-image:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="no-quote-icon"] .dt-sc-testimonial-content .dt-sc-testimonial-content-inner:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-content"] .dt-sc-testimonial-content:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-content"] .dt-sc-testimonial-content .dt-sc-testimonial-content-inner:before {
  display:none;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-image"] .dt-sc-testimonial-image:before { content:""; position:absolute; display:flex; align-items:flex-start; justify-content:flex-start; width:30px; height:30px; top:10px; left:10px; z-index:1; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-content"] .dt-sc-testimonial-content .dt-sc-testimonial-content-inner:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-content"] .dt-sc-testimonial-content .dt-sc-testimonial-quote-content:before { content:""; position:relative; width:50px; height:50px; display:flex; align-items:flex-start; justify-content:flex-start; top:-5px; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-image"] .dt-sc-testimonial-image:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-content"] .dt-sc-testimonial-content .dt-sc-testimonial-content-inner:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-content"] .dt-sc-testimonial-content .dt-sc-testimonial-quote-content:before {
  mask-image: url({{ section.settings.quote_icon | img_url: 'master' }});
  -webkit-mask-image: url({{ section.settings.quote_icon | img_url: 'master' }});
  mask-size: 100%; mask-repeat: no-repeat; mask-position: center;
  -webkit-mask-size: 100%; -webkit-mask-repeat: no-repeat; -webkit-mask-position: center;
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-content"] .dt-sc-testimonial-content.text-center .dt-sc-testimonial-content-inner:before { justify-content:center; margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial[class*="quote-icon-in-content"] .dt-sc-testimonial-content.text-end .dt-sc-testimonial-content-inner:before { justify-content:flex-end; margin-left:auto; }

/* Boxed styles (base) */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.content_boxed .dt-sc-testimonial:not(.style_2) .dt-sc-testimonial-content .dt-sc-testimonial-content-inner,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.overall_boxed .dt-sc-testimonial {
  background: {{ section.settings.testimonial_background_color }};
  padding: 25px;
  color: {{ section.settings.testimonial_content_color }};
  border-radius: {{section.settings.boxed_border_radius }}px;
  {% if section.settings.enable_box_shadow %} box-shadow: var(--DTboxShadow); {% endif %}
}

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.content_boxed .dt-sc-testimonial:not(.style_2) .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote > p,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote > p,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.overall_boxed .dt-sc-testimonial .dt-sc-testimonial-quote > p {
  color: {{ section.settings.testimonial_content_color }};
}

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.content_boxed .dt-sc-testimonial-content .dt-sc-testimonial-quote-content,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial-content .dt-sc-testimonial-quote-content { margin-bottom:10px; }

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-testimonial-content-inner,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote-content {
  background:none; border:none; box-shadow:none; padding:0; border-radius:0;
}

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.content_boxed .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote-content,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section.quote_boxed .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-testimonial-content-inner .dt-sc-testimonial-quote {
  background: {{ section.settings.testimonial_background_color }};
  color: {{ section.settings.testimonial_border_color }};
  border: 1px solid currentcolor;
  padding: 25px;
  border-radius: {{section.settings.boxed_border_radius }}px;
  {% if section.settings.enable_box_shadow %} box-shadow: var(--DTboxShadow); {% endif %}
}

/* Photo fills the card */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-photo { position:absolute; inset:0; width: 100%; height: 100%; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-photo img {
  display:block; width:100%; height:100%; object-fit: cover; object-position:center; border-radius: inherit;
}

/* Author layout + separators */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-image img {
  width:100%; height:auto; border-radius: {{section.settings.border_radius}};
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial cite { font-style:normal; display:flex; flex-wrap:wrap; align-items:center; margin:20px 0; width:100%; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial cite span { font-style:normal; display:flex; flex-wrap:wrap; align-items:center; font-weight:normal; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial cite span:before { display:block; content:"-"; position:relative; color: {{section.settings.testimonial_author_separator_color }}; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-author-info:not(.style_2) cite span:before { margin: 0 5px; }

/* Column widths */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-image {
  width: calc({{leftColumn}}% - (calc({{section.settings.column_gap}}px)/2));
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content {
  width: calc({{rightColumn}}% - (calc({{section.settings.column_gap}}px)/2));
}

/* Alignment helpers */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content p { margin-bottom:0; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-start cite { justify-content:flex-start; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-center cite { justify-content:center; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-end cite { justify-content:flex-end; }

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.reverse { flex-direction: row-reverse; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-center cite span { justify-content:center; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-end cite span { justify-content:flex-end; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-end cite span:before { right:0; left:auto; }

#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-author-info.style_2 cite span { width:100%; padding-top:5px; position:relative; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-author-info.style_2 cite span:before {
  content:""; display:block; position:absolute; width:50px; height:1px; top:10px; left:0; background: {{section.settings.testimonial_author_separator_color }};
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-end .dt-sc-author-info.style_2 cite span:before { left:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-center .dt-sc-author-info.style_2 cite span:before { right:0; margin:auto; }

/* Style 2 specifics */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 { gap:30px; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content { width:100%; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-testimonial-content-inner {
  margin:auto; width:100%; display:grid; gap: calc(.5*{{section.settings.column_gap}}px);
}
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in"] .dt-sc-testimonial-image { width:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-image"] .dt-sc-testimonial-image:before { top:5px; left:5px; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-image"] .dt-sc-testimonial-content.text-end .dt-sc-testimonial-image:before { right:5px; left:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-content"] .dt-sc-testimonial-content.text-center .dt-sc-testimonial-quote-content:before { left:0; right:0; margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-image"] .dt-sc-testimonial-content.text-center .dt-sc-testimonial-image:before { left:-40%; right:0; margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2[class*="quote-icon-in-content"] .dt-sc-testimonial-content.text-end .dt-sc-testimonial-quote-content:before { margin-left:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-author-info { display:flex; width:100%; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-author-info cite { margin-top:0; width:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-author-info img { width:75px; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-author-info.style_1 .dt-sc-testimonial-image { width:auto; margin-right: calc(.5 * {{section.settings.column_gap}}px); }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content.text-center .dt-sc-author-info { justify-content:center; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content.text-end .dt-sc-author-info { justify-content:stretch; flex-direction:row-reverse; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-author-info.style_2 { flex-direction:column; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content .dt-sc-author-info.style_2 cite { margin-top: calc(.5 * {{section.settings.column_gap}}px); }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-image{ width:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content.text-center .dt-sc-testimonial-image { margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content.text-center .dt-sc-author-info.style_2 img { margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2 .dt-sc-testimonial-content.text-end .dt-sc-author-info.style_2 img { margin-left:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_2.reverse .dt-sc-testimonial-content .dt-sc-author-info { grid-row-start:1; }

/* Style 3 grid */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3 { gap:30px; display:grid; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3 .dt-sc-testimonial-image { width:30%; max-width:150px; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-center .dt-sc-testimonial-image { margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-end .dt-sc-testimonial-image { margin-left:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3 .dt-sc-testimonial-content { width:100%; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.reverse .dt-sc-testimonial-content { grid-row-start:1; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-center,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-center cite { justify-content:center; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-end,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-end cite { justify-content:flex-end; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-center .dt-sc-testimonial-content .dt-sc-author-info cite span { justify-content:center; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-center .dt-sc-testimonial-content .dt-sc-author-info cite span:before,
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-end .dt-sc-testimonial-content .dt-sc-author-info cite span:before { right:0; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-end .dt-sc-testimonial-content .dt-sc-author-info cite span { justify-content:flex-end; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-center .dt-sc-testimonial-content .dt-sc-author-info.style_2 cite span:before { right:0; left:0; margin:auto; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial.style_3.text-end .dt-sc-testimonial-content .dt-sc-author-info.style_2 cite span:before { right:0; left:auto; }

/* Swiper spacing */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container[class*=navigation-bottom] { padding-bottom: 50px; }
{% if section.settings.dots %}
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container { margin-bottom: 40px; }
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container .swiper-pagination { bottom: -30px; }
{% endif %}

/* Laptop/Tab widths */
@media (max-width: 1540px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-image { width: calc({{lap_leftColumn}}% - (calc({{section.settings.column_gap}}px)/2)); }
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content { width: calc({{lap_rightColumn}}% - (calc({{section.settings.column_gap}}px)/2)); }
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-swiper-slider.swiper-container.center-navigation.outside_container{margin:0;}
}

/* Tablet */
@media (max-width:1199px){
  #shopify-section-{{section.id}}.home-testimonial-block:after{width:300px; height:500px; background-size:contain;}
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content{padding:0 30px;}
}

/* Mobile */
@media (max-width:767px){
  #shopify-section-{{section.id}}.home-testimonial-block:after{width:150px; height:500px;}
}
@media (max-width: 576px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial { display:grid; gap: {{section.settings.column_gap}}px; }
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-image,
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content { width:100%; }
}

/* Mobile: center the animated badge above the heading */
@media (max-width: 767px){
  #shopify-section-{{section.id}}.home-testimonial-block { position: relative; }
  #shopify-section-{{section.id}}.home-testimonial-block .rightimage{
    position: absolute !important;
    top: 40px !important;
    left: 10% !important;
    right: auto !important;
    transform: translateX(-50%);
    z-index: 3;
    pointer-events: none;
    width: 110px !important;
    height: 170px !important;
    background-size: contain !important;
  }
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-heading{
    padding-top: 180px;
    text-align: center;
  }
}

/* Rating glyphs (Font Awesome dependency) */
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content div[class*="no-star-rating"] { display:none !important; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating { width:100%; margin:0; letter-spacing:5px; display:flex; justify-content:flex-start; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-center .dt-sc-author-rating { justify-content:center; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content.text-end .dt-sc-author-rating { justify-content:flex-end; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="star-rating"] { position:relative; width:100%; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="star-rating"]:after { content:"\f005" "\f005" "\f005" "\f005" "\f005"; display:block; position:relative; font-family: FontAwesome; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="half-star-rating"]:after { content:"\f123" "\f006" "\f006" "\f006" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="one-star-rating"]:after { content:"\f005" "\f006" "\f006" "\f006" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="one-half-star-rating"]:after { content:"\f005" "\f123" "\f006" "\f006" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="two-star-rating"]:after { content:"\f005" "\f005" "\f006" "\f006" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="two-half-star-rating"]:after { content:"\f005" "\f005" "\f123" "\f006" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="three-star-rating"]:after { content:"\f005" "\f005" "\f005" "\f006" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="three-half-star-rating"]:after { content:"\f005" "\f005" "\f005" "\f123" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="four-star-rating"]:after { content:"\f005" "\f005" "\f005" "\f005" "\f006"; }
#shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content .dt-sc-author-rating div[class*="four-half-star-rating"]:after { content:"\f005" "\f005" "\f005" "\f005" "\f123"; }

/* Mobile stack for grid cards */
@media (max-width: 576px){
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial { display:grid; gap: {{section.settings.column_gap}}px; }
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-image,
  #shopify-section-{{section.id}}.home-testimonial-block .dt-sc-testimonial-section .dt-sc-testimonial .dt-sc-testimonial-content { width:100%; }
}

/* Keyframes (unchanged) */
@keyframes dt-swing2 {
  0% { transform: translateY(20px); }
  100% { transform: translateY(-20px); }
}
@keyframes bounce {
  0%,100% { transform: translateY(0); }
  50% { transform: translateY(-12px); }
}
</style>


{% schema %}
{
  "name": "Testimonial",
  "class": "index-section home-testimonial-block",
  "max_blocks": 8,
  "settings": [
    { "type": "checkbox", "id": "full", "label": "Show Full width" },
    { "type": "checkbox", "id": "spacing_both_ends", "label": "Enable Right & Left Spacing (Works only on Fullwidth)", "default": false },
    { "type": "text", "id": "padding", "label": "Style value (Padding)", "default":"0,0", "info":"Top(px),Bottom(px)" },
    { "type": "text", "id": "margin", "label": "Style value (Margin)", "default":"0,0", "info":"Top(px),Bottom(px)" },

    { "type": "image_picker", "id": "image_2", "label": "Right Image", "info": "Size: 160x210" },
    { "type": "image_picker", "id": "after_image", "label": "After Image", "info": "Size: 500x780" },

    { "type": "checkbox", "id": "show_background_image", "label": "Enable Background image" },
    { "type": "image_picker", "id": "background_image", "label": "Background image", "info": "Size: 1920x1280" },

    { "type": "select", "id": "background_style", "label": "Background Style", "default": "none",
      "options": [
        { "value": "fixed", "label": "Fixed" },
        { "value": "parallax", "label": "Parallax" },
        { "value": "none", "label": "None" }
      ]
    },
    { "type": "select", "id": "background_size", "label": "Background Size", "info": "This will not apply for parallax", "default": "auto",
      "options": [
        { "value": "auto", "label": "Auto" },
        { "value": "cover", "label": "Cover" },
        { "value": "contain", "label": "Contain" },
        { "value": "repeat", "label": "Repeat" }
      ]
    },

    { "type": "checkbox", "id": "enable_overlay", "label": "Enable Background Color (Used as Background Image Overlay Color too)" },
    { "type": "color", "id": "background_color", "label":"Background color" },
    { "type": "text", "id": "overlay_transparency", "label": "Overlay Transparency (0.01 to 1)", "default": "0.5" },

    { "type": "image_picker", "id": "after_mask_image", "label": "After Image", "info": "Size: 1920x160" },
    { "type": "color", "id": "mask_image_color", "label": "Image Color" },

    { "type": "text", "id": "section_heading", "label": "Main Heading", "default": "Testimonials" },
    { "type": "text", "id": "section_sub_heading", "label": "Sub Heading", "default": "Sub Heading" },
    { "type": "text", "id": "section_description", "label": "Description", "default": "Use this text to share the information which you like!." },
    { "type": "text", "id": "section_button_text", "label": "Link text" },
    { "type": "url", "id": "section_button_link", "label": "Link URL" },

    { "type": "header", "content": "Section Color settings" },
    { "type": "color", "id": "section_heading_color", "label": "Heading color" },
    { "type": "color", "id": "section_sub_heading_color", "label": "Sub heading color" },
    { "type": "color", "id": "section_description_color", "label": "Description color" },
    { "type": "color", "id": "section_button_bg_color", "label": "Button bg color" },
    { "type": "color", "id": "section_button_text_color", "label": "Button text color" },
    { "type": "color", "id": "section_button_hover_bg_color", "label": "Button hover bg color" },
    { "type": "color", "id": "section_button_hover_text_color", "label": "Button hover text color" },

    { "type": "select", "id": "heading_position", "label": "Heading Position",
      "options": [
        { "value": "text-center", "label": "Center" },
        { "value": "text-start", "label": "Left" },
        { "value": "text-end", "label": "Right" }
      ]
    },

    { "type": "header", "content": "Testimonial Settings" },
    { "type": "select", "id": "grid", "label": "Item per row (Will not work if Carousel enabled)", "default": "1",
      "options": [
        { "value": "1", "label": "1" },
        { "value": "2", "label": "2" },
        { "value": "3", "label": "3" },
        { "value": "4", "label": "4" }
      ]
    },
    { "type": "select", "id": "block_style", "label": "Testimonial Style", "default": "style_1",
      "options": [
        { "value": "style_1", "label": "Style 1" },
        { "value": "style_2", "label": "Style 2" },
        { "value": "style_3", "label": "Style 3" }
      ]
    },
    { "type": "radio", "id": "boxed_styles", "label": "Testimonial Boxed Styles", "default": "default",
      "options": [
        { "value": "default", "label": "Default (Plain)" },
        { "value": "overall_boxed", "label": "Overall Boxed" },
        { "value": "content_boxed", "label": "Content Boxed" },
        { "value": "quote_boxed", "label": "Quote Boxed" }
      ]
    },
    { "type": "checkbox", "id": "enable_box_shadow", "label": "Enable Box Shadow (Not for Default Style)", "default": false },
    { "type": "checkbox", "id": "reverse_column", "label": "Content reverse", "default": false },

    { "type": "select", "id": "text_position", "label": "Testimonial Text alignment", "default": "text-start",
      "options": [
        { "value": "text-center", "label": "Center" },
        { "value": "text-start", "label": "Left" },
        { "value": "text-end", "label": "Right" }
      ]
    },

    { "type": "image_picker", "id": "quote_icon", "label": "Quote Icon" },
    { "type": "select", "id": "quote_style", "label": "Quote Position (Add Quote Icon above)", "default": "no-quote-icon",
      "options": [
        { "value": "quote-icon-in-image", "label": "Within Image" },
        { "value": "quote-icon-in-content", "label": "Within Content" },
        { "value": "no-quote-icon", "label": "No Quote" }
      ]
    },

    { "type": "select", "id": "author_info_style", "label": "Author Info Style", "default": "style_2",
      "options": [
        { "value": "style_1", "label": "Inline" },
        { "value": "style_2", "label": "Block" }
      ]
    },

    { "type": "text", "id": "border_radius", "label": "Author Image Radius (in px) - Set 50% for Rounded Image", "default":"0px" },
    { "type": "text", "id": "boxed_border_radius", "label": "Content Border Radius - Leave empty for Theme Default Border Radius", "default":"0", "info": "Unit not Needed" },
    { "type": "text", "id": "column_gap", "label": "Column Gap - Leave Empty for Theme Default Gap", "default":"30", "info": "Units not needed" },

    { "type": "header", "content": "Style 1 Settings" },
    { "type": "text", "id": "content_width", "label": "Content Width - Desktop", "default":"30/70" },
    { "type": "text", "id": "lap_content_width", "label": "Content Width - Laptop (Small Screen) & Tablet", "default":"20/80", "info": "100/100 for Mobile Resolutions" },
    { "type": "select", "id": "vertical_position", "label": "Vertical position", "default": "vertical-top",
      "options": [
        { "value": "vertical-top", "label": "Top" },
        { "value": "vertical-center", "label": "Center" },
        { "value": "vertical-bottom", "label": "Bottom" }
      ]
    },

    { "type": "header", "content": "Card shape" },
    { "type": "select", "id": "card_aspect_ratio", "label": "Card aspect ratio", "default": "none",
      "options": [
        { "value": "none", "label": "Auto (no fixed ratio)" },
        { "value": "1/1", "label": "1:1 (square)" },
        { "value": "4/5", "label": "4:5 (tall portrait)" },
        { "value": "3/4", "label": "3:4" },
        { "value": "2/3", "label": "2:3" },
        { "value": "3/2", "label": "3:2" },
        { "value": "4/3", "label": "4:3" },
        { "value": "16/9", "label": "16:9 (landscape)" }
      ]
    },

    { "type": "header", "content": "Testimonial Color settings" },
    { "type": "color", "id": "testimonial_border_color", "label": "Border color (Only for Boxed Styles)" },
    { "type": "color", "id": "testimonial_background_color", "label": "Background color (Only for Boxed Styles)" },
    { "type": "color", "id": "testimonial_content_color", "label": "Content Color" },
    { "type": "color", "id": "testimonial_review_color", "label": "Review Stars Color" },
    { "type": "color", "id": "testimonial_author_text_color", "label": "Author Text Color" },
    { "type": "color", "id": "testimonial_author_designation_color", "label": "Author Designation Color" },
    { "type": "color", "id": "testimonial_author_separator_color", "label": "Testimonial Author Separator Color" },
    { "type": "color", "id": "testimonial_quote_icon_color", "label": "Quote Icon Color" },

    { "type": "header", "content": "Carousel Settings" },
    { "type": "checkbox", "id": "enable_slider", "label": "Enable Carousel", "default": true },
    { "type": "checkbox", "id": "enable_auto_height", "label": "Enable auto height", "default": true },

    { "type": "range", "id": "items_per_view", "label": "Slide per row [Desktop]", "min": 1, "max": 6, "step": 1, "default": 4, "info": "Maximum of 2 Slides, if List View is enabled" },
    { "type": "range", "id": "items_laptop_view", "label": "Slide per row [Laptop]", "min": 1, "max": 5, "step": 1, "default": 3, "info": "Maximum of 2 Slides, if List View is enabled" },
    { "type": "range", "id": "items_tablet_view", "label": "Slide per row [Tablet]", "min": 1, "max": 4, "step": 1, "default": 2, "info": "Maximum of 1 Slides, if List View is enabled" },
    { "type": "range", "id": "items_mobile_view", "label": "Slide per row [Mobile]", "min": 1, "max": 3, "step": 1, "default": 1, "info": "Maximum of 1 Slides, if List View is enabled" },

    { "type": "checkbox", "id": "enable_center_mode", "label": "Enable Center Mode", "default": false },
    { "type": "range", "id": "slider_autoplay", "min": 0, "max": 7, "step": 1, "label": "Autoplay timing", "default": 0, "unit": "sec", "info": "Use 0 to stop auto rotate" },
    { "type": "checkbox", "id": "dots", "label": "Enable Carousel Pagination", "default": true },
    { "type": "select", "id": "carousel_pagination_alignment", "label": "Carousel Pagination Alignment (Only Bottom)", "default": "center_pagination",
      "options": [
        { "value": "left_pagination", "label": "Left Aligned" },
        { "value": "center_pagination", "label": "Center Aligned" },
        { "value": "right_pagination", "label": "Right Aligned" }
      ]
    },
    { "type": "select", "id": "carousel_pagination_bottom_alignment", "label": "Carousel Pagination Bottom Alignment (Inside/Outside the Element)", "default": "outside_element",
      "options": [
        { "value": "inside_element", "label": "Inside the Element" },
        { "value": "outside_element", "label": "Outside the Element" }
      ]
    },

    { "type": "checkbox", "id": "arrows", "label": "Enable Navigation Arrows", "default": true },
    { "type": "select", "id": "nav_arrow_position", "label": "Navigation Arrows position", "default": "center-navigation",
      "options": [
        { "value": "navigation-top-left", "label": "Top Left" },
        { "value": "navigation-top-center", "label": "Top Center" },
        { "value": "navigation-top-right", "label": "Top Right" },
        { "value": "center-navigation", "label": "Center" },
        { "value": "navigation-bottom-left", "label": "Bottom left" },
        { "value": "navigation-bottom-center", "label": "Bottom center" },
        { "value": "navigation-bottom-right", "label": "Bottom right" }
      ]
    },
    { "type": "select", "id": "center_nav_arrow_alignment", "label": "Center navigation alignment (Select 'Center', in the above dropdown)", "default": "outside_container",
      "options": [
        { "value": "outside_container", "label": "Outside Container (not for Full width Section)" },
        { "value": "along_with_container", "label": "Along with Container" },
        { "value": "inside_container", "label": "Inside Container" }
      ]
    },

    { "type": "color", "id": "navigation_button_color", "label": "Navigation Button Bg Color" },
    { "type": "color", "id": "navigation_button_icon_color", "label": "Navigation Button Icon Color" },
    { "type": "color", "id": "navigation_button_hover_color", "label": "Navigation Button Hover Bg Color" },
    { "type": "color", "id": "navigation_button_hover_icon_color", "label": "Navigation Button Hover Icon Color" },
    { "type": "color", "id": "navigation_dot_color", "label": "Navigation Dot Color" },
    { "type": "color", "id": "navigation_dot_active_color", "label": "Navigation Dot Active Color" },

    { "type": "header", "content": "Custom class" },
    { "type": "text", "id": "custom_class_name", "label": "Add your custom class name here" }
  ],
  "blocks": [
    {
      "type": "content",
      "name": "Content",
      "settings": [
        { "type": "select", "id": "review_type", "label": "Card Type", "default": "full",
          "options": [
            { "value": "full", "label": "Full review card" },
            { "value": "photo", "label": "Photo review (image only)" }
          ]
        },

        { "type": "richtext", "id": "quote", "label": "Text", "info": "Used for Full review card", "default": "<p>Lorem Ipsum is simply dummy text of the printing and typesetting industry.</p>" },
        { "type": "image_picker", "id": "icon", "label": "Author Image (Full review)" },
        { "type": "text", "id": "author", "label": "Author", "default": "Author Name" },
        { "type": "text", "id": "job", "label": "Designation", "default": "Author Designation" },
        { "type": "select", "id": "star", "label": "Rating", "default": "3",
          "options": [
            { "value": "0", "label": "0" },
            { "value": "0.5", "label": "0.5" },
            { "value": "1", "label": "1" },
            { "value": "1.5", "label": "1.5" },
            { "value": "2", "label": "2" },
            { "value": "2.5", "label": "2.5" },
            { "value": "3", "label": "3" },
            { "value": "3.5", "label": "3.5" },
            { "value": "4", "label": "4" },
            { "value": "4.5", "label": "4.5" },
            { "value": "5", "label": "5" }
          ]
        },

        { "type": "image_picker", "id": "photo", "label": "Customer Photo (Photo review)", "info": "Shown when Card Type = Photo" }
      ]
    }
  ],
  "presets": [
    {
      "name": "Testimonial",
      "category": "Client sections",
      "blocks": [{ "type": "content" }]
    }
  ]
}
{% endschema %}
