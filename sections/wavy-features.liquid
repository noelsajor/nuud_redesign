<!-- SEO & Accessibility Optimized Features Section with Overlapping Waves -->
<section class="features-wave-section" 
         role="region"
         aria-labelledby="features-title"
         style="background: {% if section.settings.use_gradient %}{{ section.settings.background_gradient }}{% else %}{{ section.settings.background_color }}{% endif %}; 
                padding: {{ section.settings.section_padding_top }}px 20px {{ section.settings.section_padding_bottom }}px 20px;">
  
  <!-- Top Wave -->
  {% if section.settings.show_top_wave %}
  <div class="wave-top" 
       style="top: -{{ section.settings.wave_overlap_top }}px; 
              height: {{ section.settings.wave_overlap_top }}px;"
       aria-hidden="true">
    <svg viewBox="0 0 1440 100" 
         fill="none" 
         xmlns="http://www.w3.org/2000/svg"
         preserveAspectRatio="none"
         role="presentation"
         focusable="false">
      {% assign freq = section.settings.wave_frequency %}
      {% assign amp = section.settings.wave_amplitude %}
      
      {% if freq == 1 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 10 }} Q720,{{ 100 | minus: amp | minus: amp | plus: 10 }} 1440,{{ 100 | minus: amp | plus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} Q720,{{ 100 | minus: amp | minus: amp }} 1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | minus: 10 }} Q720,{{ 100 | minus: amp | minus: amp | minus: 20 }} 1440,{{ 100 | minus: amp | minus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} L720,{{ 100 | minus: amp | minus: amp }} L1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 5 }} C480,{{ 100 | minus: amp | minus: amp | plus: 5 }} 960,{{ 100 | minus: amp | minus: amp | plus: 5 }} 1440,{{ 100 | minus: amp | plus: 5 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% elsif freq == 2 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 10 }} Q360,{{ 100 | minus: amp | minus: amp | plus: 10 }} 720,{{ 100 | minus: amp | plus: 10 }} T1440,{{ 100 | minus: amp | plus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} Q360,{{ 100 | minus: amp | minus: amp }} 720,{{ 100 | minus: amp }} T1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | minus: 10 }} Q360,{{ 100 | minus: amp | minus: amp | minus: 20 }} 720,{{ 100 | minus: amp | minus: 10 }} T1440,{{ 100 | minus: amp | minus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} L360,{{ 100 | minus: amp | minus: amp }} L720,{{ 100 | minus: amp }} L1080,{{ 100 | minus: amp | minus: amp }} L1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 5 }} C240,{{ 100 | minus: amp | minus: amp | plus: 5 }} 480,{{ 100 | minus: amp | minus: amp | plus: 5 }} 720,{{ 100 | minus: amp | plus: 5 }} C960,{{ 100 | minus: amp | plus: amp | plus: 5 }} 1200,{{ 100 | minus: amp | plus: amp | plus: 5 }} 1440,{{ 100 | minus: amp | plus: 5 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% elsif freq == 3 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 10 }} Q240,{{ 100 | minus: amp | minus: amp | plus: 10 }} 480,{{ 100 | minus: amp | plus: 10 }} T960,{{ 100 | minus: amp | plus: 10 }} T1440,{{ 100 | minus: amp | plus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} Q240,{{ 100 | minus: amp | minus: amp }} 480,{{ 100 | minus: amp }} T960,{{ 100 | minus: amp }} T1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | minus: 10 }} Q240,{{ 100 | minus: amp | minus: amp | minus: 20 }} 480,{{ 100 | minus: amp | minus: 10 }} T960,{{ 100 | minus: amp | minus: 10 }} T1440,{{ 100 | minus: amp | minus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} L240,{{ 100 | minus: amp | minus: amp }} L480,{{ 100 | minus: amp }} L720,{{ 100 | minus: amp | minus: amp }} L960,{{ 100 | minus: amp }} L1200,{{ 100 | minus: amp | minus: amp }} L1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 5 }} C160,{{ 100 | minus: amp | minus: amp | plus: 5 }} 320,{{ 100 | minus: amp | minus: amp | plus: 5 }} 480,{{ 100 | minus: amp | plus: 5 }} C640,{{ 100 | minus: amp | plus: amp | plus: 5 }} 800,{{ 100 | minus: amp | plus: amp | plus: 5 }} 960,{{ 100 | minus: amp | plus: 5 }} C1120,{{ 100 | minus: amp | minus: amp | plus: 5 }} 1280,{{ 100 | minus: amp | minus: amp | plus: 5 }} 1440,{{ 100 | minus: amp | plus: 5 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% elsif freq == 4 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 10 }} Q180,{{ 100 | minus: amp | minus: amp | plus: 10 }} 360,{{ 100 | minus: amp | plus: 10 }} T720,{{ 100 | minus: amp | plus: 10 }} T1080,{{ 100 | minus: amp | plus: 10 }} T1440,{{ 100 | minus: amp | plus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} Q180,{{ 100 | minus: amp | minus: amp }} 360,{{ 100 | minus: amp }} T720,{{ 100 | minus: amp }} T1080,{{ 100 | minus: amp }} T1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | minus: 10 }} Q180,{{ 100 | minus: amp | minus: amp | minus: 20 }} 360,{{ 100 | minus: amp | minus: 10 }} T720,{{ 100 | minus: amp | minus: 10 }} T1080,{{ 100 | minus: amp | minus: 10 }} T1440,{{ 100 | minus: amp | minus: 10 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,100 L0,{{ 100 | minus: amp }} L180,{{ 100 | minus: amp | minus: amp }} L360,{{ 100 | minus: amp }} L540,{{ 100 | minus: amp | minus: amp }} L720,{{ 100 | minus: amp }} L900,{{ 100 | minus: amp | minus: amp }} L1080,{{ 100 | minus: amp }} L1260,{{ 100 | minus: amp | minus: amp }} L1440,{{ 100 | minus: amp }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,100 L0,{{ 100 | minus: amp | plus: 5 }} C120,{{ 100 | minus: amp | minus: amp | plus: 5 }} 240,{{ 100 | minus: amp | minus: amp | plus: 5 }} 360,{{ 100 | minus: amp | plus: 5 }} C480,{{ 100 | minus: amp | plus: amp | plus: 5 }} 600,{{ 100 | minus: amp | plus: amp | plus: 5 }} 720,{{ 100 | minus: amp | plus: 5 }} C840,{{ 100 | minus: amp | minus: amp | plus: 5 }} 960,{{ 100 | minus: amp | minus: amp | plus: 5 }} 1080,{{ 100 | minus: amp | plus: 5 }} C1200,{{ 100 | minus: amp | plus: amp | plus: 5 }} 1320,{{ 100 | minus: amp | plus: amp | plus: 5 }} 1440,{{ 100 | minus: amp | plus: 5 }} L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% else %}
        <path d="M0,100 L0,50 Q360,30 720,50 T1440,50 L1440,100 Z" fill="{{ section.settings.wave_color }}"/>
      {% endif %}
    </svg>
  </div>
  {% endif %}
  
  <!-- Features Container -->
  <div class="features-container" 
       style="max-width: {{ section.settings.container_width }}px;">
    
    <!-- Section Title -->
    {% if section.settings.section_title != blank %}
    <h2 id="features-title" 
        class="section-title"
        style="color: {{ section.settings.title_color }}; 
               font-size: {{ section.settings.title_size }}px;
               text-align: {{ section.settings.title_alignment }};">
      {{ section.settings.section_title }}
    </h2>
    {% else %}
    <h2 id="features-title" class="sr-only">Store Features and Benefits</h2>
    {% endif %}
    
    <!-- Scrolling Wrapper -->
    {% if section.settings.enable_continuous_scroll %}
    <div class="scrolling-wrapper {% if section.settings.scroll_direction == 'right-left' %}scroll-rtl{% else %}scroll-ltr{% endif %}"
         style="--scroll-speed: {{ section.settings.scroll_speed }}s;">
      <ul class="features-scroll-track" role="list">
        {% for block in section.blocks %}
          <li class="feature-item" {{ block.shopify_attributes }}>
            <!-- Icon -->
            <div class="feature-icon-wrapper" 
                 {% if block.settings.icon_svg != blank or block.settings.icon_image %}
                 role="img" 
                 aria-label="{{ block.settings.icon_label | default: block.settings.feature_text }}"
                 {% endif %}>
              {% if block.settings.icon_svg != blank %}
              <div class="feature-icon" 
                   style="color: {{ block.settings.icon_color }};"
                   aria-hidden="true">
                {{ block.settings.icon_svg }}
              </div>
              {% elsif block.settings.icon_image %}
              <div class="feature-icon-image" aria-hidden="true">
                <img src="{{ block.settings.icon_image | image_url: width: 120 }}"
                     srcset="{{ block.settings.icon_image | image_url: width: 60 }} 60w,
                             {{ block.settings.icon_image | image_url: width: 120 }} 120w"
                     sizes="60px"
                     alt="{{ block.settings.icon_label | default: '' }}"
                     width="60"
                     height="60"
                     loading="lazy"
                     decoding="async">
              </div>
              {% endif %}
            </div>
            
            <!-- Text Content -->
            {% if block.settings.feature_text != blank %}
            <div class="feature-text-wrapper">
              <p class="feature-text" 
                 style="color: {{ block.settings.text_color }}; 
                        font-size: {{ block.settings.text_size }}px;
                        font-weight: {{ block.settings.text_weight }};">
                {{ block.settings.feature_text }}
              </p>
              {% if block.settings.feature_subtext != blank %}
              <p class="feature-subtext"
                 style="color: {{ block.settings.subtext_color }}; 
                        font-size: {{ block.settings.subtext_size }}px;">
                {{ block.settings.feature_subtext }}
              </p>
              {% endif %}
            </div>
            {% endif %}
          </li>
        {% endfor %}
        
        <!-- Duplicate for seamless loop -->
        {% for block in section.blocks %}
          <li class="feature-item" aria-hidden="true">
            <div class="feature-icon-wrapper">
              {% if block.settings.icon_svg != blank %}
              <div class="feature-icon" style="color: {{ block.settings.icon_color }};">
                {{ block.settings.icon_svg }}
              </div>
              {% elsif block.settings.icon_image %}
              <div class="feature-icon-image">
                <img src="{{ block.settings.icon_image | image_url: width: 120 }}"
                     alt=""
                     width="60"
                     height="60"
                     loading="lazy">
              </div>
              {% endif %}
            </div>
            {% if block.settings.feature_text != blank %}
            <div class="feature-text-wrapper">
              <p class="feature-text" 
                 style="color: {{ block.settings.text_color }}; 
                        font-size: {{ block.settings.text_size }}px;
                        font-weight: {{ block.settings.text_weight }};">
                {{ block.settings.feature_text }}
              </p>
              {% if block.settings.feature_subtext != blank %}
              <p class="feature-subtext"
                 style="color: {{ block.settings.subtext_color }}; 
                        font-size: {{ block.settings.subtext_size }}px;">
                {{ block.settings.feature_subtext }}
              </p>
              {% endif %}
            </div>
            {% endif %}
          </li>
        {% endfor %}
      </ul>
    </div>
    {% else %}
    <!-- Static Grid (original layout) -->
    <ul class="features-grid {% if section.settings.enable_scroll_animation %}animate-scroll-{{ section.settings.fade_direction }}{% endif %}"
        role="list">
      {% for block in section.blocks %}
        <li class="feature-item" 
            {{ block.shopify_attributes }}
            style="animation-delay: {{ forloop.index0 | times: 0.1 }}s;">
          <div class="feature-icon-wrapper" 
               {% if block.settings.icon_svg != blank or block.settings.icon_image %}
               role="img" 
               aria-label="{{ block.settings.icon_label | default: block.settings.feature_text }}"
               {% endif %}>
            {% if block.settings.icon_svg != blank %}
            <div class="feature-icon" 
                 style="color: {{ block.settings.icon_color }};"
                 aria-hidden="true">
              {{ block.settings.icon_svg }}
            </div>
            {% elsif block.settings.icon_image %}
            <div class="feature-icon-image" aria-hidden="true">
              <img src="{{ block.settings.icon_image | image_url: width: 120 }}"
                   srcset="{{ block.settings.icon_image | image_url: width: 60 }} 60w,
                           {{ block.settings.icon_image | image_url: width: 120 }} 120w"
                   sizes="60px"
                   alt="{{ block.settings.icon_label | default: '' }}"
                   width="60"
                   height="60"
                   loading="lazy"
                   decoding="async">
            </div>
            {% endif %}
          </div>
          {% if block.settings.feature_text != blank %}
          <div class="feature-text-wrapper">
            <p class="feature-text" 
               style="color: {{ block.settings.text_color }}; 
                      font-size: {{ block.settings.text_size }}px;
                      font-weight: {{ block.settings.text_weight }};">
              {{ block.settings.feature_text }}
            </p>
            {% if block.settings.feature_subtext != blank %}
            <p class="feature-subtext"
               style="color: {{ block.settings.subtext_color }}; 
                      font-size: {{ block.settings.subtext_size }}px;">
              {{ block.settings.feature_subtext }}
            </p>
            {% endif %}
          </div>
          {% endif %}
        </li>
      {% endfor %}
    </ul>
    {% endif %}
  </div>
  
  <!-- Bottom Wave -->
  {% if section.settings.show_bottom_wave %}
  <div class="wave-bottom" 
       style="bottom: -{{ section.settings.wave_overlap_bottom }}px; 
              height: {{ section.settings.wave_overlap_bottom }}px;"
       aria-hidden="true">
    <svg viewBox="0 0 1440 100" 
         fill="none" 
         xmlns="http://www.w3.org/2000/svg"
         preserveAspectRatio="none"
         role="presentation"
         focusable="false">
      {% assign freq = section.settings.wave_frequency %}
      {% assign amp = section.settings.wave_amplitude %}
      
      {% if freq == 1 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,0 L0,{{ amp | minus: 10 }} Q720,{{ amp | plus: amp | minus: 10 }} 1440,{{ amp | minus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,0 L0,{{ amp }} Q720,{{ amp | plus: amp }} 1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,0 L0,{{ amp | plus: 10 }} Q720,{{ amp | plus: amp | plus: 20 }} 1440,{{ amp | plus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,0 L0,{{ amp }} L720,{{ amp | plus: amp }} L1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,0 L0,{{ amp | minus: 5 }} C480,{{ amp | plus: amp | minus: 5 }} 960,{{ amp | plus: amp | minus: 5 }} 1440,{{ amp | minus: 5 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% elsif freq == 2 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,0 L0,{{ amp | minus: 10 }} Q360,{{ amp | plus: amp | minus: 10 }} 720,{{ amp | minus: 10 }} T1440,{{ amp | minus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,0 L0,{{ amp }} Q360,{{ amp | plus: amp }} 720,{{ amp }} T1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,0 L0,{{ amp | plus: 10 }} Q360,{{ amp | plus: amp | plus: 20 }} 720,{{ amp | plus: 10 }} T1440,{{ amp | plus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,0 L0,{{ amp }} L360,{{ amp | plus: amp }} L720,{{ amp }} L1080,{{ amp | plus: amp }} L1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,0 L0,{{ amp | minus: 5 }} C240,{{ amp | plus: amp | minus: 5 }} 480,{{ amp | plus: amp | minus: 5 }} 720,{{ amp | minus: 5 }} C960,{{ amp | minus: amp | minus: 5 }} 1200,{{ amp | minus: amp | minus: 5 }} 1440,{{ amp | minus: 5 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% elsif freq == 3 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,0 L0,{{ amp | minus: 10 }} Q240,{{ amp | plus: amp | minus: 10 }} 480,{{ amp | minus: 10 }} T960,{{ amp | minus: 10 }} T1440,{{ amp | minus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,0 L0,{{ amp }} Q240,{{ amp | plus: amp }} 480,{{ amp }} T960,{{ amp }} T1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,0 L0,{{ amp | plus: 10 }} Q240,{{ amp | plus: amp | plus: 20 }} 480,{{ amp | plus: 10 }} T960,{{ amp | plus: 10 }} T1440,{{ amp | plus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,0 L0,{{ amp }} L240,{{ amp | plus: amp }} L480,{{ amp }} L720,{{ amp | plus: amp }} L960,{{ amp }} L1200,{{ amp | plus: amp }} L1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,0 L0,{{ amp | minus: 5 }} C160,{{ amp | plus: amp | minus: 5 }} 320,{{ amp | plus: amp | minus: 5 }} 480,{{ amp | minus: 5 }} C640,{{ amp | minus: amp | minus: 5 }} 800,{{ amp | minus: amp | minus: 5 }} 960,{{ amp | minus: 5 }} C1120,{{ amp | plus: amp | minus: 5 }} 1280,{{ amp | plus: amp | minus: 5 }} 1440,{{ amp | minus: 5 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% elsif freq == 4 %}
        {% case section.settings.wave_shape %}
          {% when 'gentle' %}
            <path d="M0,0 L0,{{ amp | minus: 10 }} Q180,{{ amp | plus: amp | minus: 10 }} 360,{{ amp | minus: 10 }} T720,{{ amp | minus: 10 }} T1080,{{ amp | minus: 10 }} T1440,{{ amp | minus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'medium' %}
            <path d="M0,0 L0,{{ amp }} Q180,{{ amp | plus: amp }} 360,{{ amp }} T720,{{ amp }} T1080,{{ amp }} T1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'dramatic' %}
            <path d="M0,0 L0,{{ amp | plus: 10 }} Q180,{{ amp | plus: amp | plus: 20 }} 360,{{ amp | plus: 10 }} T720,{{ amp | plus: 10 }} T1080,{{ amp | plus: 10 }} T1440,{{ amp | plus: 10 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'sharp' %}
            <path d="M0,0 L0,{{ amp }} L180,{{ amp | plus: amp }} L360,{{ amp }} L540,{{ amp | plus: amp }} L720,{{ amp }} L900,{{ amp | plus: amp }} L1080,{{ amp }} L1260,{{ amp | plus: amp }} L1440,{{ amp }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
          {% when 'rounded' %}
            <path d="M0,0 L0,{{ amp | minus: 5 }} C120,{{ amp | plus: amp | minus: 5 }} 240,{{ amp | plus: amp | minus: 5 }} 360,{{ amp | minus: 5 }} C480,{{ amp | minus: amp | minus: 5 }} 600,{{ amp | minus: amp | minus: 5 }} 720,{{ amp | minus: 5 }} C840,{{ amp | plus: amp | minus: 5 }} 960,{{ amp | plus: amp | minus: 5 }} 1080,{{ amp | minus: 5 }} C1200,{{ amp | minus: amp | minus: 5 }} 1320,{{ amp | minus: amp | minus: 5 }} 1440,{{ amp | minus: 5 }} L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
        {% endcase %}
      {% else %}
        <path d="M0,0 L0,50 Q360,70 720,50 T1440,50 L1440,0 Z" fill="{{ section.settings.wave_color }}"/>
      {% endif %}
    </svg>
  </div>
  {% endif %}
  
</section>

<style>
/* Base Section */
.features-wave-section {
  position: relative;
  overflow: visible;
  z-index: 1;
}

/* Waves */
.wave-top {
  position: absolute;
  left: 0;
  width: 100%;
  line-height: 0;
  pointer-events: none;
  z-index: 2;
  overflow: visible;
}

.wave-bottom {
  position: absolute;
  left: 0;
  width: 100%;
  line-height: 0;
  pointer-events: none;
  z-index: 2;
  overflow: visible;
}

.wave-top svg,
.wave-bottom svg {
  width: 100%;
  height: 100%;
  display: block;
}

/* Container */
.features-container {
  position: relative;
  z-index: 3;
  margin: 0 auto;
  width: 100%;
}

/* Section Title */
.section-title {
  margin: 0 0 40px 0;
  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;
  line-height: 1.2;
}

/* ===== CONTINUOUS SCROLLING STYLES ===== */
.scrolling-wrapper {
  overflow: hidden;
  width: 100%;
  position: relative;
}

.features-scroll-track {
  display: flex;
  gap: 60px;
  list-style: none;
  margin: 0;
  padding: 0;
  width: fit-content;
  animation: scroll var(--scroll-speed, 20s) linear infinite;
}

/* Pause animation on hover */
.scrolling-wrapper:hover .features-scroll-track {
  animation-play-state: paused;
}

/* Left to Right scrolling */
.scroll-ltr .features-scroll-track {
  animation-name: scrollLTR;
}

@keyframes scrollLTR {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(-50%);
  }
}

/* Right to Left scrolling */
.scroll-rtl .features-scroll-track {
  animation-name: scrollRTL;
}

@keyframes scrollRTL {
  0% {
    transform: translateX(-50%);
  }
  100% {
    transform: translateX(0);
  }
}

.scrolling-wrapper .feature-item {
  flex-shrink: 0;
  opacity: 1;
  animation: none;
  display: flex;
  align-items: center;
  gap: 15px;
  width: auto;
  min-width: 250px;
}