{% doc %}
  @prompt
    I want to build frequently asked questions section where you have on the left side a Sub heading, heading and body. on the right side should be all questions aligned vertically with a dropdown icon that once you click on it allows you to see the answer of the clicked question, include a breakpoint for mobile that turns the whole layout vertical, make the padding of the general container to behave the same way as the other sections in this theme, including the same padding, margins, I want to be able to adjust the border radius of each individual corner of the questions container, include a single input field to type the values in this format 16,16, fix the issue when hover the question container, I want to be able to set an image as background for this section or set a background color that I can also choose, now I want to be able as well to change the color of the container or set an image as background, now when you hover the questions it get a different colored shape of the container, please make the question container and and the hover of this container to have the same shape, remove the border radius of the overlay/hover container, remove the hover effect for questions, remove the overlay effect when hovering the whole container of the section, remove the overlay effect when hover the container, remove all hover effect for this section, remove all hover effects including container and questions
    
{% enddoc %}
{% assign ai_gen_id = block.id | replace: '_', '' | downcase %}

{% style %}
  .ai-faq-section-{{ ai_gen_id }} {
    padding: {{ settings.gutter_width }}px {{ settings.fullwidth_gap }}%;
    {% if block.settings.section_bg_image %}
      background-image: url('{{ block.settings.section_bg_image | image_url: width: 2000 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    {% else %}
      background-color: {{ block.settings.section_bg_color }};
    {% endif %}
  }

  .ai-faq-container-{{ ai_gen_id }} {
    max-width: {{ settings.container_width }}px;
    margin: 0 auto;
    display: grid;
    grid-template-columns: 1fr 1fr;
    gap: {{ settings.gutter_width | times: 2 }}px;
    align-items: start;
  }

  .ai-faq-content-{{ ai_gen_id }} {
    {% if block.settings.content_bg_image %}
      background-image: url('{{ block.settings.content_bg_image | image_url: width: 800 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    {% else %}
      background-color: {{ block.settings.content_bg_color }};
    {% endif %}
    padding: {{ settings.gutter_width }}px;
    {% assign border_values = block.settings.content_border_radius | split: ',' %}
    {% if border_values.size == 4 %}
      border-radius: {{ border_values[0] | strip }}px {{ border_values[1] | strip }}px {{ border_values[2] | strip }}px {{ border_values[3] | strip }}px;
    {% else %}
      border-radius: {{ settings.overall_border_radius }}px;
    {% endif %}
  }

  .ai-faq-subheading-{{ ai_gen_id }} {
    font-family: {{ settings.additional_font.family }}, {{ settings.additional_font.fallback_families }};
    font-size: {{ settings.type_additional_size }}px;
    color: {{ block.settings.subheading_color }};
    margin: 0 0 10px 0;
    font-weight: 400;
  }

  .ai-faq-heading-{{ ai_gen_id }} {
    font-family: {{ settings.header_font.family }}, {{ settings.header_font.fallback_families }};
    font-size: {{ settings.h2_size }}px;
    color: {{ block.settings.heading_color }};
    margin: 0 0 20px 0;
    line-height: {{ settings.heading_line_height }};
    font-weight: 600;
  }

  .ai-faq-body-{{ ai_gen_id }} {
    font-family: {{ settings.base_font.family }}, {{ settings.base_font.fallback_families }};
    font-size: {{ settings.type_base_size }}px;
    color: {{ block.settings.body_color }};
    line-height: {{ settings.body_line_height }};
    margin: 0;
  }

  .ai-faq-questions-{{ ai_gen_id }} {
    display: flex;
    flex-direction: column;
    gap: {{ block.settings.question_spacing }}px;
  }

  .ai-faq-question-item-{{ ai_gen_id }} {
    {% if block.settings.question_bg_image %}
      background-image: url('{{ block.settings.question_bg_image | image_url: width: 800 }}');
      background-size: cover;
      background-position: center;
      background-repeat: no-repeat;
    {% else %}
      background-color: {{ block.settings.question_bg_color }};
    {% endif %}
    border-radius: {{ block.settings.question_border_radius }}px;
    overflow: hidden;
  }

  .ai-faq-question-button-{{ ai_gen_id }} {
    width: 100%;
    padding: {{ block.settings.question_padding }}px;
    background: none;
    border: none;
    text-align: left;
    cursor: pointer;
    display: flex;
    justify-content: space-between;
    align-items: center;
    font-family: {{ settings.base_font.family }}, {{ settings.base_font.fallback_families }};
    font-size: {{ block.settings.question_font_size }}px;
    color: {{ block.settings.question_text_color }};
    font-weight: 600;
  }

  .ai-faq-question-icon-{{ ai_gen_id }} {
    width: 20px;
    height: 20px;
    transition: transform 0.3s ease;
    flex-shrink: 0;
    margin-left: 15px;
  }

  .ai-faq-question-item-{{ ai_gen_id }}.active .ai-faq-question-icon-{{ ai_gen_id }} {
    transform: rotate(180deg);
  }

  .ai-faq-answer-{{ ai_gen_id }} {
    max-height: 0;
    overflow: hidden;
    transition: max-height 0.3s ease;
  }

  .ai-faq-answer-content-{{ ai_gen_id }} {
    padding: 0 {{ block.settings.question_padding }}px {{ block.settings.question_padding }}px;
    font-family: {{ settings.base_font.family }}, {{ settings.base_font.fallback_families }};
    font-size: {{ block.settings.answer_font_size }}px;
    color: {{ block.settings.answer_text_color }};
    line-height: {{ settings.body_line_height }};
  }

  .ai-faq-question-item-{{ ai_gen_id }}.active .ai-faq-answer-{{ ai_gen_id }} {
    max-height: 500px;
  }

  @media screen and (max-width: {{ settings.tab_container_width }}px) {
    .ai-faq-container-{{ ai_gen_id }} {
      grid-template-columns: 1fr;
      gap: {{ settings.gutter_width }}px;
    }

    .ai-faq-heading-{{ ai_gen_id }} {
      font-size: {{ settings.h2_size | times: 0.8 }}px;
    }

    .ai-faq-body-{{ ai_gen_id }} {
      font-size: {{ settings.type_base_size_tablet }}px;
    }

    .ai-faq-subheading-{{ ai_gen_id }} {
      font-size: {{ settings.type_additional_size_tablet }}px;
    }
  }

  @media screen and (max-width: 640px) {
    .ai-faq-section-{{ ai_gen_id }} {
      padding: {{ settings.gutter_width | divided_by: 2 }}px {{ settings.fullwidth_gap | divided_by: 2 }}%;
    }

    .ai-faq-content-{{ ai_gen_id }} {
      padding: {{ settings.gutter_width | divided_by: 2 }}px;
    }

    .ai-faq-heading-{{ ai_gen_id }} {
      font-size: {{ settings.h2_size | times: 0.7 }}px;
    }

    .ai-faq-body-{{ ai_gen_id }} {
      font-size: {{ settings.type_base_size_tablet_mobile }}px;
    }

    .ai-faq-subheading-{{ ai_gen_id }} {
      font-size: {{ settings.type_additional_size_mobile }}px;
    }

    .ai-faq-question-button-{{ ai_gen_id }} {
      font-size: {{ block.settings.question_font_size | times: 0.9 }}px;
    }

    .ai-faq-answer-content-{{ ai_gen_id }} {
      font-size: {{ block.settings.answer_font_size | times: 0.9 }}px;
    }
  }
{% endstyle %}

<faq-section-{{ ai_gen_id }} class="ai-faq-section-{{ ai_gen_id }}" {{ block.shopify_attributes }}>
  <div class="ai-faq-container-{{ ai_gen_id }}">
    <div class="ai-faq-content-{{ ai_gen_id }}">
      {% if block.settings.subheading != blank %}
        <div class="ai-faq-subheading-{{ ai_gen_id }}">{{ block.settings.subheading }}</div>
      {% endif %}
      
      {% if block.settings.heading != blank %}
        <h2 class="ai-faq-heading-{{ ai_gen_id }}">{{ block.settings.heading }}</h2>
      {% endif %}
      
      {% if block.settings.body_text != blank %}
        <div class="ai-faq-body-{{ ai_gen_id }}">{{ block.settings.body_text }}</div>
      {% endif %}
    </div>

    <div class="ai-faq-questions-{{ ai_gen_id }}">
      {% for i in (1..10) %}
        {% assign question_key = 'question_' | append: i %}
        {% assign answer_key = 'answer_' | append: i %}
        {% assign question = block.settings[question_key] %}
        {% assign answer = block.settings[answer_key] %}
        
        {% if question != blank and answer != blank %}
          <div class="ai-faq-question-item-{{ ai_gen_id }}" data-question="{{ i }}">
            <button class="ai-faq-question-button-{{ ai_gen_id }}" aria-expanded="false">
              <span>{{ question }}</span>
              <svg class="ai-faq-question-icon-{{ ai_gen_id }}" viewBox="0 0 24 24" fill="none" stroke="{{ block.settings.question_text_color }}" stroke-width="2">
                <polyline points="6,9 12,15 18,9"></polyline>
              </svg>
            </button>
            <div class="ai-faq-answer-{{ ai_gen_id }}">
              <div class="ai-faq-answer-content-{{ ai_gen_id }}">{{ answer }}</div>
            </div>
          </div>
        {% endif %}
      {% endfor %}
    </div>
  </div>
</faq-section-{{ ai_gen_id }}>

<script>
  (function() {
    class FaqSection{{ ai_gen_id }} extends HTMLElement {
      constructor() {
        super();
      }

      connectedCallback() {
        this.questions = this.querySelectorAll('.ai-faq-question-item-{{ ai_gen_id }}');
        this.setupEventListeners();
      }

      setupEventListeners() {
        this.questions.forEach((question) => {
          const button = question.querySelector('.ai-faq-question-button-{{ ai_gen_id }}');
          const answer = question.querySelector('.ai-faq-answer-{{ ai_gen_id }}');
          
          button.addEventListener('click', () => {
            const isActive = question.classList.contains('active');
            
            this.questions.forEach((q) => {
              q.classList.remove('active');
              q.querySelector('.ai-faq-question-button-{{ ai_gen_id }}').setAttribute('aria-expanded', 'false');
            });
            
            if (!isActive) {
              question.classList.add('active');
              button.setAttribute('aria-expanded', 'true');
            }
          });
        });
      }
    }

    customElements.define('faq-section-{{ ai_gen_id }}', FaqSection{{ ai_gen_id }});
  })();
</script>

{% schema %}
{
  "name": "FAQ section",
  "tag": null,
  "settings": [
    {
      "type": "header",
      "content": "Section background"
    },
    {
      "type": "image_picker",
      "id": "section_bg_image",
      "label": "Background image"
    },
    {
      "type": "color",
      "id": "section_bg_color",
      "label": "Background color",
      "default": "#ffffff"
    },
    {
      "type": "header",
      "content": "Content area"
    },
    {
      "type": "text",
      "id": "subheading",
      "label": "Subheading",
      "default": "FAQ"
    },
    {
      "type": "text",
      "id": "heading",
      "label": "Heading",
      "default": "Frequently Asked Questions"
    },
    {
      "type": "richtext",
      "id": "body_text",
      "label": "Body text",
      "default": "<p>Find answers to the most common questions about our products and services.</p>"
    },
    {
      "type": "image_picker",
      "id": "content_bg_image",
      "label": "Content background image"
    },
    {
      "type": "color",
      "id": "content_bg_color",
      "label": "Content background color",
      "default": "#f8f8f8"
    },
    {
      "type": "text",
      "id": "content_border_radius",
      "label": "Content border radius",
      "default": "8,8,8,8",
      "info": "Format: top-left, top-right, bottom-right, bottom-left (e.g., 8,8,8,8)"
    },
    {
      "type": "color",
      "id": "subheading_color",
      "label": "Subheading color",
      "default": "#666666"
    },
    {
      "type": "color",
      "id": "heading_color",
      "label": "Heading color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "body_color",
      "label": "Body text color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Questions area"
    },
    {
      "type": "image_picker",
      "id": "question_bg_image",
      "label": "Questions background image"
    },
    {
      "type": "color",
      "id": "question_bg_color",
      "label": "Questions background color",
      "default": "#ffffff"
    },
    {
      "type": "range",
      "id": "question_border_radius",
      "min": 0,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Question border radius",
      "default": 8
    },
    {
      "type": "range",
      "id": "question_spacing",
      "min": 5,
      "max": 30,
      "step": 1,
      "unit": "px",
      "label": "Question spacing",
      "default": 15
    },
    {
      "type": "range",
      "id": "question_padding",
      "min": 10,
      "max": 40,
      "step": 2,
      "unit": "px",
      "label": "Question padding",
      "default": 20
    },
    {
      "type": "range",
      "id": "question_font_size",
      "min": 14,
      "max": 24,
      "step": 1,
      "unit": "px",
      "label": "Question font size",
      "default": 18
    },
    {
      "type": "range",
      "id": "answer_font_size",
      "min": 14,
      "max": 20,
      "step": 1,
      "unit": "px",
      "label": "Answer font size",
      "default": 16
    },
    {
      "type": "color",
      "id": "question_text_color",
      "label": "Question text color",
      "default": "#333333"
    },
    {
      "type": "color",
      "id": "answer_text_color",
      "label": "Answer text color",
      "default": "#666666"
    },
    {
      "type": "header",
      "content": "Questions and answers"
    },
    {
      "type": "text",
      "id": "question_1",
      "label": "Question 1",
      "default": "What is your return policy?"
    },
    {
      "type": "richtext",
      "id": "answer_1",
      "label": "Answer 1",
      "default": "<p>We offer a 30-day return policy for all unused items in their original packaging.</p>"
    },
    {
      "type": "text",
      "id": "question_2",
      "label": "Question 2",
      "default": "How long does shipping take?"
    },
    {
      "type": "richtext",
      "id": "answer_2",
      "label": "Answer 2",
      "default": "<p>Standard shipping takes 3-5 business days, while express shipping takes 1-2 business days.</p>"
    },
    {
      "type": "text",
      "id": "question_3",
      "label": "Question 3",
      "default": "Do you offer international shipping?"
    },
    {
      "type": "richtext",
      "id": "answer_3",
      "label": "Answer 3",
      "default": "<p>Yes, we ship to most countries worldwide. Shipping costs and delivery times vary by location.</p>"
    },
    {
      "type": "text",
      "id": "question_4",
      "label": "Question 4"
    },
    {
      "type": "richtext",
      "id": "answer_4",
      "label": "Answer 4"
    },
    {
      "type": "text",
      "id": "question_5",
      "label": "Question 5"
    },
    {
      "type": "richtext",
      "id": "answer_5",
      "label": "Answer 5"
    },
    {
      "type": "text",
      "id": "question_6",
      "label": "Question 6"
    },
    {
      "type": "richtext",
      "id": "answer_6",
      "label": "Answer 6"
    },
    {
      "type": "text",
      "id": "question_7",
      "label": "Question 7"
    },
    {
      "type": "richtext",
      "id": "answer_7",
      "label": "Answer 7"
    },
    {
      "type": "text",
      "id": "question_8",
      "label": "Question 8"
    },
    {
      "type": "richtext",
      "id": "answer_8",
      "label": "Answer 8"
    },
    {
      "type": "text",
      "id": "question_9",
      "label": "Question 9"
    },
    {
      "type": "richtext",
      "id": "answer_9",
      "label": "Answer 9"
    },
    {
      "type": "text",
      "id": "question_10",
      "label": "Question 10"
    },
    {
      "type": "richtext",
      "id": "answer_10",
      "label": "Answer 10"
    }
  ],
  "presets": [
    {
      "name": "FAQ section"
    }
  ]
}
{% endschema %}